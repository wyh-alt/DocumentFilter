# 文件筛选工具打包指南

本指南将帮助您将文件筛选工具打包为独立的可执行文件(exe)，使其能在任何Windows系统上运行，无需安装Python环境。

## 方法一：使用打包脚本（推荐）

我们提供了一个自动化打包脚本，只需几步即可完成打包过程。

### 前提条件

- 已安装Python 3.6或更高版本
- 能够访问互联网（用于安装PyInstaller和Pillow）

### 打包步骤

1. 打开命令提示符或PowerShell
2. 导航到项目目录
   ```
   cd 路径/到/文件筛选工具
   ```
3. 运行打包脚本
   ```
   python build_exe.py
   ```
4. 等待打包完成
   - 脚本会自动生成应用图标
   - 然后使用该图标打包应用程序
5. 打包完成后，可执行文件将位于`dist`文件夹中，名为`文件筛选工具.exe`

## 方法二：手动使用PyInstaller

如果自动打包脚本出现问题，您可以手动使用PyInstaller进行打包。

### 步骤

1. 安装必要的依赖项
   ```
   pip install pyinstaller pillow
   ```

2. 生成应用图标
   ```
   python create_icon.py
   ```
   这将生成`file_selector_icon.ico`或`file_selector_icon.png`文件

3. 使用PyInstaller打包应用程序
   ```
   pyinstaller --name="文件筛选工具" --windowed --onefile --icon=file_selector_icon.ico file_selector.py
   ```
   如果生成的是PNG格式，请使用：
   ```
   pyinstaller --name="文件筛选工具" --windowed --onefile --icon=file_selector_icon.png file_selector.py
   ```

4. 打包完成后，可执行文件将位于`dist`文件夹中

## 图标说明

应用程序图标是通过`create_icon.py`脚本生成的，它使用PyQt6绘制了一个带有文件夹和筛选漏斗的图标。

- 如果安装了Pillow库，脚本会直接生成`.ico`格式的图标
- 如果没有Pillow库，脚本会生成`.png`格式的图标，PyInstaller也支持使用PNG格式作为图标

如果您想使用自定义图标，只需替换生成的图标文件，或修改`create_icon.py`中的绘制代码。

## 打包选项说明

- `--name="文件筛选工具"`: 设置输出的exe文件名
- `--windowed`: 创建一个不显示命令行窗口的GUI应用程序
- `--onefile`: 将所有内容打包到一个独立的exe文件中
- `--icon=图标路径.ico`: 设置应用程序图标

## 常见问题

### 1. 打包后程序无法运行

可能的原因：
- 缺少必要的依赖项
- 路径问题

解决方案：
- 确保requirements.txt中包含了所有依赖项
- 尝试添加`--debug=all`选项进行调试

### 2. 打包过程中出现错误

可能的原因：
- PyInstaller版本不兼容
- Python路径问题

解决方案：
- 尝试更新或降级PyInstaller: `pip install pyinstaller==4.5.1`
- 确保使用正确的Python解释器

### 3. 打包后的文件过大

解决方案：
- 使用`--exclude-module`排除不必要的模块
- 使用UPX压缩: `--upx-dir=UPX目录`

### 4. 图标生成失败

可能的原因：
- PyQt6安装问题
- Pillow库缺失

解决方案：
- 确保正确安装了PyQt6: `pip install PyQt6`
- 安装Pillow库: `pip install pillow`
- 如果仍然失败，可以使用在线工具创建.ico文件

## 分发应用程序

打包完成后，您可以将`dist`文件夹中的`文件筛选工具.exe`文件分发给其他用户。用户只需双击该文件即可运行程序，无需安装Python或其他依赖项。 